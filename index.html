<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" href="./src/leaflet/leaflet.css"/>
    <link rel="stylesheet" href="./src/custom.css"/>
    <script src="./src/leaflet/leaflet.js"></script>
    <script src="https://kit.fontawesome.com/dda9c078d2.js" crossorigin="anonymous"></script>
    <style>
        #map {
            position: absolute; top: 0; bottom: 0; left: 0; right: 0;
            background-color: #0fa8d2;
        }
    </style>
        <script type="text/javascript" src="./src/icons.js"></script>
        <script type="text/javascript" src="./configs/restaurants.js"></script>
        <script type="text/javascript" src="./configs/corner_stores.js"></script>
        <script type="text/javascript" src="./configs/novelty_shops.js"></script>
        <script type="text/javascript" src="./configs/dispensaries.js"></script>
        <script type="text/javascript" src="./configs/supply_stores.js"></script>
        <script type="text/javascript" src="./configs/pet_stores.js"></script>
        <script type="text/javascript" src="./configs/recreational_stores.js"></script>
        <script type="text/javascript" src="./configs/electronics_stores.js"></script>
        <script type="text/javascript" src="./configs/coffee_houses.js"></script>
        <script type="text/javascript" src="./configs/repair_shops.js"></script>
        <script type="text/javascript" src="./configs/wheelchair_key_mapping.js"></script>
        <script type="text/javascript" src="./src/utils.js"></script>
</head>
<body>
    <div id = "map"></div>


    <script>
        /*==================== GTA Map ====================*/
        var map = L.map('map', {
            crs: L.CRS.Simple,
            minZoom: -3.0,
            zoomDelta: 0.5,
            zoomSnap: 0.005,
            zoomAnimationThreshold: 20,
            wheelPxPerZoomLevel: 20
        });
        var bounds = [[0,0], [8000,8000]];
        var image = L.imageOverlay('./images/GTAV8kRes_10_percent.png', bounds).addTo(map);
        map.fitBounds(bounds);

        /*
        // convert store to geos - use when lucky updates
        store_list_geos = [
            restaurants_list,
            corner_stores_list,
            novelty_shops_list,
            dispensaries_list,
            supply_stores_list,
            pet_stores_list,
            recreational_stores_list,
            electronics_stores_list,
            coffee_houses_list,
            repair_shops_list
        ]

        store_list_geos.forEach(function (item, index) {
            console.log("geojsons ", convert_stores_togeos(item));
        });

        */
        /*==================== Icons ====================*/

        // Icons now imported at the top

        /*==================== Restaurants ====================*/

        var restaurants_layer = create_geoJSON_layer(restaurants_list, redIcon);

        /*==================== Corner Stores ====================*/

        var corner_stores_layer = create_geoJSON_layer(corner_stores_list, blueIcon);

        /*==================== Novelty Shops ====================*/

        var novelty_shops_layer = create_geoJSON_layer(novelty_shops_list, blueIcon);

        /*====================== Dispensaries ======================*/

        var dispensaries_layer = create_geoJSON_layer(dispensaries_list, greenIcon);

        /*====================== Supply Stores ======================*/

        var supply_stores_layer = create_geoJSON_layer(supply_stores_list, blackIcon);

        /*==================== Pet Stores ====================*/

        var pet_stores_layer = create_geoJSON_layer(pet_stores_list, whiteIcon);

        /*==================== Recreation ====================*/

        var recreational_stores_layer = create_geoJSON_layer(recreational_stores_list, pinkIcon);

        /*==================== Electronics ====================*/

        var electronics_stores_layer = create_geoJSON_layer(electronics_stores_list, purpleIcon);

        /*==================== Coffee Houses ====================*/

        var coffee_houses_layer = create_geoJSON_layer(coffee_houses_list, orangeIcon);

        /*==================== Repair Shops ====================*/

        var repair_shops_layer = create_geoJSON_layer(repair_shops_list, tealIcon);

        /*==================== Easter Eggs ====================*/
        //var norman = L.marker([5930, 5870]).bindPopup('Normans Dumbass House').addTo(map);
        //var center = L.marker ([4000, 4000]).bindPopup('Center of Map').addTo(map);
        /*==================== Layers ====================*/
        /*
        var cornerStores = L.layerGroup(corner_stores_markers);
        //var restaurants = L.layerGroup(restaurants_markers);
        var noveltyShops = L.layerGroup(novelty_shops_markers);
        var dispensaries = L.layerGroup(dispensaries_markers);
        var hardwareStores = L.layerGroup(supply_stores_markers);
        var petStores = L.layerGroup(pet_stores_markers);
        var recreation = L.layerGroup(recreational_stores_markers);
        var electronics = L.layerGroup(electronics_stores_markers);
        var coffee_houses = L.layerGroup(coffee_houses_markers);
        var repairShop = L.layerGroup(repair_shops_markers);
        */
        /*==================== Leaflet Layer Control ====================*/
        map.addLayer(restaurants_layer);
        map.addLayer(corner_stores_layer);
        map.addLayer(novelty_shops_layer);
        map.addLayer(dispensaries_layer);
        map.addLayer(supply_stores_layer);
        map.addLayer(pet_stores_layer);
        map.addLayer(recreational_stores_layer);
        map.addLayer(electronics_stores_layer);
        map.addLayer(coffee_houses_layer);
        map.addLayer(repair_shops_layer);

        var overlayMaps = {
            'Restaurants (Staffed Food Establishments)': restaurants_layer, 
            'Corner Stores (Bandaids, Armor)': corner_stores_layer, 
            'Novelty Shops (Plushies, Collectables)': novelty_shops_layer, 
            'Dispensaries (Joints, Cigs)': dispensaries_layer, 
            'Supply Stores (Tools, Supplies)': supply_stores_layer, 
            'Pet Stores (For Pets)': pet_stores_layer,
            'Recreational (You know, Fun Stuff)': recreational_stores_layer,
            'Electronics (Phones, Laptops, VPNs)': electronics_stores_layer,
            'Coffee Houses & Beverage (Coffee, Wine)': coffee_houses_layer,
            'Mechanics & Repair Shops': repair_shops_layer,
        };

        L.control.layers(0, overlayMaps).addTo(map);

    </script>
    <div class="authors">
        <!--             This site is still a work in progress, contact The Authors>@MelarkyNP / @TheThirdWheelFM on Twitter <br>or Attend Dant in-city or Ham#2848 On Discord for info/attribution to your storefront's marker! -->
        <h2>
            This site is still a work in progress, contact the authors below for info/attribution to your storefront's marker!<br>
            Author 1: @MelarkyNP on Twitter,<br>
            Author 2: Atten Dant in-city / @thethirdwheelfm on Twitter / Ham#2848 On Discord.
        </h2>
    </div>
</body>
</html>
